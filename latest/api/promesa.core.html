<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><title>promesa.core documentation</title></head><body><header><section class="title"><h1><a href="index.html">Promesa Api Documentation</a></h1></section><small>Version: 1.1.1</small></header><section class="container"><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>promesa</span></div></div></li><li class="depth-2 branch current"><a href="promesa.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="promesa.monad.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>monad</span></div></a></li></ul></div><section class="namespace-docs" id="content"><h2 class="anchor" id="top">promesa.core</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-alet"><h3><a href="#var-alet">alet</a></h3><h4 class="type">macro</h4><div class="usage"><code>(alet bindings &amp; body)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-all"><h3><a href="#var-all">all</a></h3><div class="usage"><code>(all promises)</code></div><div class="doc"><div class="markdown"><p>Given an array of promises, return a promise that is fulfilled when all the items in the array are fulfilled.</p></div></div></div><div class="public anchor" id="var-any"><h3><a href="#var-any">any</a></h3><div class="usage"><code>(any promises)</code></div><div class="doc"><div class="markdown"><p>Given an array of promises, return a promise that is fulfilled when first one item in the array is fulfilled.</p></div></div></div><div class="public anchor" id="var-await"><h3><a href="#var-await">await</a></h3><div class="usage"><code>(await &amp; args)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-bind"><h3><a href="#var-bind">bind</a></h3><div class="usage"><code>(bind p callback)</code></div><div class="doc"><div class="markdown"><p>A chain helper for promises.</p></div></div></div><div class="public anchor" id="var-branch"><h3><a href="#var-branch">branch</a></h3><div class="usage"><code>(branch p success failure)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-cancel.21"><h3><a href="#var-cancel.21">cancel!</a></h3><div class="usage"><code>(cancel! p)</code></div><div class="doc"><div class="markdown"><p>Cancel the promise.</p></div></div></div><div class="public anchor" id="var-cancelled.3F"><h3><a href="#var-cancelled.3F">cancelled?</a></h3><div class="usage"><code>(cancelled? v)</code></div><div class="doc"><div class="markdown"><p>Return true if <code>v</code> is a cancelled promise.</p></div></div></div><div class="public anchor" id="var-catch"><h3><a href="#var-catch">catch</a></h3><div class="usage"><code>(catch p f)</code><code>(catch p type f)</code></div><div class="doc"><div class="markdown"><p>Catch all promise chain helper.</p></div></div></div><div class="public anchor" id="var-chain"><h3><a href="#var-chain">chain</a></h3><div class="usage"><code>(chain p &amp; funcs)</code></div><div class="doc"><div class="markdown"><p>Like then but accepts multiple parameters.</p></div></div></div><div class="public anchor" id="var-delay"><h3><a href="#var-delay">delay</a></h3><div class="usage"><code>(delay t)</code><code>(delay t v)</code></div><div class="doc"><div class="markdown"><p>Given a timeout in miliseconds and optional value, returns a promise that will fulfilled with provided value (or nil) after the time is reached.</p></div></div></div><div class="public anchor" id="var-done.3F"><h3><a href="#var-done.3F">done?</a></h3><div class="usage"><code>(done? p)</code></div><div class="doc"><div class="markdown"><p>Returns true if promise <code>p</code> is already done.</p></div></div></div><div class="public anchor" id="var-err"><h3><a href="#var-err">err</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A short alias for <code>error</code> function.</p></div></div></div><div class="public anchor" id="var-error"><h3><a href="#var-error">error</a></h3><div class="usage"><code>(error f p)</code><code>(error f type p)</code></div><div class="doc"><div class="markdown"><p>Same as <code>catch</code> but with parameters inverted.</p></div></div></div><div class="public anchor" id="var-extract"><h3><a href="#var-extract">extract</a></h3><div class="usage"><code>(extract p)</code></div><div class="doc"><div class="markdown"><p>Returns the current promise value.</p></div></div></div><div class="public anchor" id="var-finally"><h3><a href="#var-finally">finally</a></h3><div class="usage"><code>(finally p callback)</code></div><div class="doc"><div class="markdown"><p>Attach handler to promise that will be executed independently if promise is resolved or rejected.</p></div></div></div><div class="public anchor" id="var-ICancellable"><h3><a href="#var-ICancellable">ICancellable</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A cancellation abstraction.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--cancel"><h3><a href="#var--cancel">-cancel</a></h3><div class="usage"><code>(-cancel _)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var--cancelled.3F"><h3><a href="#var--cancelled.3F">-cancelled?</a></h3><div class="usage"><code>(-cancelled? _)</code></div><div class="doc"><div class="markdown"></div></div></div></div></div></div><div class="public anchor" id="var-IPromise"><h3><a href="#var-IPromise">IPromise</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A basic future abstraction.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--bind"><h3><a href="#var--bind">-bind</a></h3><div class="usage"><code>(-bind _ callback)</code></div><div class="doc"><div class="markdown"><p>Chain a promise.</p></div></div></div><div class="public anchor" id="var--catch"><h3><a href="#var--catch">-catch</a></h3><div class="usage"><code>(-catch _ callback)</code></div><div class="doc"><div class="markdown"><p>Catch a error in a promise.</p></div></div></div><div class="public anchor" id="var--map"><h3><a href="#var--map">-map</a></h3><div class="usage"><code>(-map _ callback)</code></div><div class="doc"><div class="markdown"><p>Chain a promise.</p></div></div></div></div></div></div><div class="public anchor" id="var-IPromiseFactory"><h3><a href="#var-IPromiseFactory">IPromiseFactory</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A promise constructor abstraction.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--promise"><h3><a href="#var--promise">-promise</a></h3><div class="usage"><code>(-promise _)</code></div><div class="doc"><div class="markdown"><p>Create a promise instance.</p></div></div></div></div></div></div><div class="public anchor" id="var-IScheduler"><h3><a href="#var-IScheduler">IScheduler</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--schedule"><h3><a href="#var--schedule">-schedule</a></h3><div class="usage"><code>(-schedule _ ms func)</code></div><div class="doc"><div class="markdown"></div></div></div></div></div></div><div class="public anchor" id="var-IState"><h3><a href="#var-IState">IState</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Additional state/introspection abstraction.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--extract"><h3><a href="#var--extract">-extract</a></h3><div class="usage"><code>(-extract _)</code></div><div class="doc"><div class="markdown"><p>Extract the current value.</p></div></div></div><div class="public anchor" id="var--pending.3F"><h3><a href="#var--pending.3F">-pending?</a></h3><div class="usage"><code>(-pending? _)</code></div><div class="doc"><div class="markdown"><p>Retutns true if a promise is pending.</p></div></div></div><div class="public anchor" id="var--rejected.3F"><h3><a href="#var--rejected.3F">-rejected?</a></h3><div class="usage"><code>(-rejected? _)</code></div><div class="doc"><div class="markdown"><p>Returns true if a promise is rejected.</p></div></div></div><div class="public anchor" id="var--resolved.3F"><h3><a href="#var--resolved.3F">-resolved?</a></h3><div class="usage"><code>(-resolved? _)</code></div><div class="doc"><div class="markdown"><p>Returns true if a promise is resolved.</p></div></div></div></div></div></div><div class="public anchor" id="var-map"><h3><a href="#var-map">map</a></h3><div class="usage"><code>(map f p)</code></div><div class="doc"><div class="markdown"><p>Apply a function to the promise value and return a new promise with the result.</p></div></div></div><div class="public anchor" id="var-mapcat"><h3><a href="#var-mapcat">mapcat</a></h3><div class="usage"><code>(mapcat f p)</code></div><div class="doc"><div class="markdown"><p>Same as <code>map</code> but removes one level of promise neesting. Useful when the map function returns a promise instead of value.</p><p>In JS environment this function is analogous to <code>map</code> because the promise abstraction overloads the <code>map</code> operator.</p></div></div></div><div class="public anchor" id="var-pending.3F"><h3><a href="#var-pending.3F">pending?</a></h3><div class="usage"><code>(pending? p)</code></div><div class="doc"><div class="markdown"><p>Returns true if promise <code>p</code> is stil pending.</p></div></div></div><div class="public anchor" id="var-promise"><h3><a href="#var-promise">promise</a></h3><div class="usage"><code>(promise v)</code></div><div class="doc"><div class="markdown"><p>The promise constructor.</p></div></div></div><div class="public anchor" id="var-promise-.3Estr"><h3><a href="#var-promise-.3Estr">promise-&gt;str</a></h3><div class="usage"><code>(promise-&gt;str p)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-promise.3F"><h3><a href="#var-promise.3F">promise?</a></h3><div class="usage"><code>(promise? v)</code></div><div class="doc"><div class="markdown"><p>Return true if <code>v</code> is a promise instance.</p></div></div></div><div class="public anchor" id="var-promisify"><h3><a href="#var-promisify">promisify</a></h3><div class="usage"><code>(promisify callable)</code></div><div class="doc"><div class="markdown"><p>Given a nodejs like function that accepts a callback as the last argument and return an other function that returns a promise.</p></div></div></div><div class="public anchor" id="var-rejected"><h3><a href="#var-rejected">rejected</a></h3><div class="usage"><code>(rejected v)</code></div><div class="doc"><div class="markdown"><p>Return a rejected promise with provided reason.</p></div></div></div><div class="public anchor" id="var-rejected.3F"><h3><a href="#var-rejected.3F">rejected?</a></h3><div class="usage"><code>(rejected? p)</code></div><div class="doc"><div class="markdown"><p>Returns true if promise <code>p</code> is already rejected.</p></div></div></div><div class="public anchor" id="var-resolved"><h3><a href="#var-resolved">resolved</a></h3><div class="usage"><code>(resolved v)</code></div><div class="doc"><div class="markdown"><p>Return a resolved promise with provided value.</p></div></div></div><div class="public anchor" id="var-resolved.3F"><h3><a href="#var-resolved.3F">resolved?</a></h3><div class="usage"><code>(resolved? p)</code></div><div class="doc"><div class="markdown"><p>Returns true if promise <code>p</code> is already fulfilled.</p></div></div></div><div class="public anchor" id="var-schedule"><h3><a href="#var-schedule">schedule</a></h3><div class="usage"><code>(schedule ms func)</code></div><div class="doc"><div class="markdown"><p>Schedule a callable to be executed after the <code>ms</code> delay is reached.</p><p>In JVM it uses a scheduled executor service and in JS it uses the <code>setTimeout</code> function.</p></div></div></div><div class="public anchor" id="var-then"><h3><a href="#var-then">then</a></h3><div class="usage"><code>(then p f)</code></div><div class="doc"><div class="markdown"><p>Same as <code>map</code> but with parameters inverted for convenience and for familiarity with javascript&rsquo;s promises <code>.then</code> operator.</p></div></div></div></section></section></body></html>